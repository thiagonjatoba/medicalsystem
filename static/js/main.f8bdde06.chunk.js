(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports=n(208)},153:function(e,t,n){},154:function(e,t,n){e.exports=n.p+"static/media/logo.7408be3c.png"},208:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),i=(n(124),n(105)),l=n(27),u=n(34),s="http://localhost:53887/api";function p(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&window.location.reload(!0);var a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}var m=function(){return localStorage.getItem("token")},h=function(e){localStorage.setItem("token",e)};function d(){var e=m();return e?{"Content-Type":"application/json",Authorization:"MEDICALSYSTEM "+e}:{}}var f=n(15),g=n(16),b=n(18),v=n(17),E=n(19),w=n(52),x=n.n(w),y=n(35),j=n(36);function O(){var e=Object(y.a)([""]);return O=function(){return e},e}function k(){var e=Object(y.a)([""]);return k=function(){return e},e}var C=j.a.div(k()),S=j.a.form(O()),N=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:"",error:""},n.handleSignUp=function(e){e.preventDefault(),alert("Eu vou te registrar")},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(C,null,r.a.createElement(S,{onSubmit:this.handleSignUp},r.a.createElement("img",{src:x.a,alt:"Airbnb logo"}),this.state.error&&r.a.createElement("p",null,this.state.error),r.a.createElement("input",{type:"text",placeholder:"Nome de usu\xe1rio",onChange:function(t){return e.setState({username:t.target.value})}}),r.a.createElement("input",{type:"email",placeholder:"Endere\xe7o de e-mail",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Senha",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Cadastrar gr\xe1tis"),r.a.createElement("hr",null),r.a.createElement(u.b,{to:"/"},"Fazer login")))}}]),t}(a.Component),I=n(37),A=n.n(I),z=n(53),L=n(109),T=n.n(L).a.create({baseURL:"http://localhost:53887/api"});T.interceptors.request.use(function(){var e=Object(z.a)(A.a.mark(function e(t){var n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=m())&&(t.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var M=T;function P(){var e=Object(y.a)(["\n  width: 400px;\n  background: #fff;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  img {\n    width: 100px;\n    margin: 10px 0 40px;\n  }\n  p {\n    color: #ff3333;\n    margin-bottom: 15px;\n    border: 1px solid #ff3333;\n    padding: 10px;\n    width: 100%;\n    text-align: center;\n  }\n  input {\n    flex: 1;\n    height: 46px;\n    margin-bottom: 15px;\n    padding: 0 20px;\n    color: #777;\n    font-size: 15px;\n    width: 100%;\n    border: 1px solid #ddd;\n    &::placeholder {\n      color: #999;\n    }\n  }\n  button {\n    color: #fff;\n    font-size: 16px;\n    background: #fc6963;\n    height: 56px;\n    border: 0;\n    border-radius: 5px;\n    width: 100%;\n  }\n  hr {\n    margin: 20px 0;\n    border: none;\n    border-bottom: 1px solid #cdcdcd;\n    width: 100%;\n  }\n  a {\n    font-size: 16;\n    font-weight: bold;\n    color: #999;\n    text-decoration: none;\n  }\n"]);return P=function(){return e},e}function J(){var e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n"]);return J=function(){return e},e}var U=j.a.div(J()),B=j.a.form(P()),D=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",error:""},n.handleSignIn=function(){var e=Object(z.a)(A.a.mark(function e(t){var a,r,o,c;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.email,o=a.password,r&&o){e.next=6;break}n.setState({error:"Preencha e-mail e senha para continuar!"}),e.next=17;break;case 6:return e.prev=6,e.next=9,M.post("/seguranca/autenticar",{email:r,password:o});case 9:c=e.sent,h(c.data.token),n.props.history.push("/app"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),n.setState({error:"Houve um problema com o login, verifique suas credenciais."});case 17:case"end":return e.stop()}},e,null,[[6,14]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(U,null,r.a.createElement(B,{onSubmit:this.handleSignIn},r.a.createElement("img",{src:x.a,alt:"Airbnb logo"}),this.state.error&&r.a.createElement("p",null,this.state.error),r.a.createElement("input",{type:"email",placeholder:"Endere\xe7o de e-mail",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Senha",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Entrar"),r.a.createElement("hr",null),r.a.createElement(u.b,{to:"/signup"},"Criar conta gr\xe1tis")))}}]),t}(a.Component),q=Object(l.f)(D),K=n(110),W=n(59),F=n(209),G=(n(153),n(117)),H=n.n(G),R=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).buttonClick=function(){return n.validar()},n.onChange=function(e,t){return n.setState(Object(K.a)({},t,e))},n.state={user:"",password:"",MensagemInfo:""},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-signin"},r.a.createElement("img",{className:"logo",src:n(154)}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{className:"inputLogin input",value:this.state.user,placeholder:"Usu\xe1rio",onChange:function(t){e.onChange(t.target.value,"user")}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(H.a,{className:"inputLogin input",value:this.state.password,placeholder:"Senha",onChange:function(t){e.onChange(t.target.value,"password")}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(W.a,{className:"btn btnLogin",type:"primary",onClick:this.buttonClick},"Entrar"),r.a.createElement("br",null),r.a.createElement("div",{className:"info"},this.state.MensagemInfo))}},{key:"validar",value:function(){!this.state.user.length>0||!this.state.password.length>0?this.setState({MensagemInfo:"Preencher os campos."}):function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,senha:t})};fetch("".concat(s,"/seguranca/autenticar"),n).then(p).then(function(e){return window.location="/main",h(e.Key),e})}(this.state.user,this.state.password)}}]),t}(r.a.Component);var Y=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).buttonClick=function(){return n.acessar()},n}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-signin"},r.a.createElement(W.a,{className:"btn btnLogin",type:"primary",onClick:this.buttonClick},"Acessar"),r.a.createElement("br",null))}},{key:"acessar",value:function(){!function(){var e={method:"GET",headers:d()};fetch("".concat(s,"/operacao/recuperarConvenios"),e).then(p).then(function(e){return window.location="/signup",h(e.Key),e})}()}}]),t}(r.a.Component),$=function(e){var t=e.component,n=Object(i.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return null!==localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Q=function(){return r.a.createElement(u.a,null,r.a.createElement(l.d,null,r.a.createElement($,{exact:!0,path:"/",component:q}),r.a.createElement($,{path:"/signup",component:N}),r.a.createElement($,{path:"/main",component:Y}),r.a.createElement(l.b,{path:"/login",component:R}),r.a.createElement(l.b,{path:"*",component:function(){return r.a.createElement("h1",null,"Page not found")}})))},V=function(){return r.a.createElement(Q,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,n){e.exports=n.p+"static/media/logo.7408be3c.png"}},[[119,1,2]]]);
//# sourceMappingURL=main.f8bdde06.chunk.js.map